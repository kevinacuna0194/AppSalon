{"version":3,"sources":["app.js"],"names":["resultado","document","querySelector","paso","pasoInicial","pasoFinal","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarSeccion","tabs","botonesPaginador","paginaSiguiente","paginaAnterior","consultarAPI","nombreCliente","seleccionarFecha","seleccionarHora","mostrarResumen","querySelectorAll","forEach","boton","addEventListener","e","parseInt","target","dataset","seccionAnterior","classList","remove","pasoSelector","add","tabAnterior","async","url","fetch","mostrarServicios","json","error","console","log","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","divServicio","some","agregado","filter","value","dia","Date","getUTCDay","includes","mostrarAlerta","split","resumen","firstChild","removeChild","Object","values","length","headingServicios","contenedorServicio","textoServicio","innerHTML","headingCita","fechaCita","horaCita","mensaje","tipo","elemento","desaparece","alertaPrevia","alerta","setTimeout","mostrarSpinner","spinner"],"mappings":"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","file":"app.js","sourcesContent":["const resultado = document.querySelector('#resultado');\r\n\r\nlet paso = 1;\r\nconst pasoInicial = 1;\r\nconst pasoFinal = 3;\r\n\r\nconst cita = {\r\n    nombre: '',\r\n    fecha: '',\r\n    hora: '',\r\n    servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    iniciarApp();\r\n});\r\n\r\nfunction iniciarApp() {\r\n    mostrarSeccion() /** Mustra la seccion por defaul en /cita al ingresar  */\r\n    tabs(); /** Cambiar la seccion cuando se presionen los Tabs */\r\n    botonesPaginador(); /** Agrega o quita los botones del paginador */\r\n    paginaSiguiente();\r\n    paginaAnterior();\r\n\r\n    consultarAPI(); /** Consulta la API en el backend de PHP */\r\n\r\n    nombreCliente(); /** Añadir el nombre del cliente al objeto de Cita */\r\n    seleccionarFecha(); /** Añade la fecha de la cita en el objeto */\r\n    seleccionarHora(); /** Añade la hora de la cita en el objeto */\r\n\r\n    mostrarResumen(); /** Muestra el resumen de la cita */\r\n}\r\n\r\nfunction tabs() {\r\n    const botones = document.querySelectorAll('.tabs button');\r\n\r\n    botones.forEach(boton => {\r\n        boton.addEventListener('click', function (e) {\r\n            /** Detectar a que le estamos dando click para mostrar esa sección */\r\n            // console.log(e.target.dataset); // DOMStringMap {paso: \"1\"}\r\n            // console.log(typeof parseInt(e.target.dataset.paso)); \r\n            paso = parseInt(e.target.dataset.paso);\r\n            mostrarSeccion();\r\n            botonesPaginador();\r\n        });\r\n    });\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n    /** Ocultar la seccion que tenga la clase de mostrar */\r\n    const seccionAnterior = document.querySelector('.mostrar');\r\n    if (seccionAnterior) {\r\n        seccionAnterior.classList.remove('mostrar');\r\n    }\r\n\r\n    /** Seleccionar la sección con el paso */\r\n    const pasoSelector = `#paso-${paso}`; // id=\"paso-1\"\r\n    const seccion = document.querySelector(pasoSelector); // <div id=\"paso-1\" class=\"seccion\">...</div>\r\n    seccion.classList.add('mostrar');\r\n\r\n    /** Quita la clase de actual al tab anterior */\r\n    const tabAnterior = document.querySelector('.actual');\r\n    if (tabAnterior) {\r\n        tabAnterior.classList.remove('actual');\r\n    }\r\n\r\n    /** Resalta el Tab actual */\r\n    const tab = document.querySelector(`[data-paso=\"${paso}\"]`)\r\n    tab.classList.add('actual');\r\n}\r\n\r\nfunction botonesPaginador() {\r\n    /** Registrar botonoes de siguiente y anterior */\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n    if (paso === 1) {\r\n        paginaAnterior.classList.add('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    } else if (paso === 3) {\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.add('ocultar');\r\n\r\n        mostrarResumen();\r\n    } else {\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    }\r\n\r\n    mostrarSeccion();\r\n}\r\n\r\nfunction paginaAnterior() {\r\n    /** Seleccionar boton */\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    paginaAnterior.addEventListener('click', function () {\r\n        if (paso <= pasoInicial) return;\r\n\r\n        paso--;\r\n\r\n        botonesPaginador();\r\n    });\r\n}\r\n\r\nfunction paginaSiguiente() {\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n    paginaSiguiente.addEventListener('click', function () {\r\n        if (paso >= pasoFinal) return;\r\n\r\n        paso++;\r\n\r\n        botonesPaginador();\r\n    });\r\n}\r\n\r\nasync function consultarAPI() {\r\n    /** try, catch previene que tu aplicación deje de funcionar y te da un mensaje de error */\r\n    try {\r\n        const url = 'http://localhost:3000/api/servicios';\r\n        const resultado = await fetch(url);\r\n        const servicios = await resultado.json();\r\n        mostrarServicios(servicios);\r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction mostrarServicios(servicios) {\r\n    servicios.forEach(servicio => {\r\n        const { id, nombre, precio } = servicio;\r\n\r\n        const nombreServicio = document.createElement('P');\r\n        nombreServicio.classList.add('nombre-servicio');\r\n        nombreServicio.textContent = nombre;\r\n\r\n        const precioServicio = document.createElement('P');\r\n        precioServicio.classList.add('precio-servicio');\r\n        precioServicio.textContent = `$${precio}`;\r\n\r\n        const servicioDiv = document.createElement('DIV');\r\n        servicioDiv.classList.add('servicio');\r\n        servicioDiv.dataset.idServicio = id; /** Atributo perzonalizado */\r\n\r\n        /** Evento al Servicio */\r\n        servicioDiv.onclick = function () {\r\n            seleccionarServicio(servicio);\r\n        }\r\n\r\n        servicioDiv.appendChild(nombreServicio);\r\n        servicioDiv.appendChild(precioServicio);\r\n\r\n        document.querySelector('#servicios').appendChild(servicioDiv);\r\n    });\r\n}\r\n\r\nfunction seleccionarServicio(servicio) {\r\n    /** Objeto completo */\r\n    const { id } = servicio;\r\n    /** Objeto */\r\n    const { servicios } = cita;\r\n    /** Identificar el elemento al que se le da click */\r\n    const divServicio = document.querySelector(`[data-id-servicio=\"${id}\"]`);\r\n\r\n    /** Comprobar si un servicio ya fue agregao */\r\n    if (servicios.some(agregado => agregado.id === id)) {\r\n        /** true - Agregado \r\n         * Eliminarlo */\r\n        cita.servicios = servicios.filter(agregado => agregado.id !== id);\r\n        divServicio.classList.remove('seleccionado');\r\n    } else {\r\n        /** false - no está agregado \r\n         * Agregarlo */\r\n        /** Toma una copia del arreglo servicios dentro del objeto creado y le voy agregando el nuevo servicio seleccionado en la interfaz de usuario. */\r\n        cita.servicios = [...servicios, servicio];\r\n        divServicio.classList.add('seleccionado');\r\n    }\r\n}\r\n\r\nfunction nombreCliente() {\r\n    cita.nombre = document.querySelector('#nombre').value;\r\n}\r\n\r\nfunction seleccionarFecha() {\r\n    const inputFecha = document.querySelector('#fecha');\r\n    inputFecha.addEventListener('input', function (e) {\r\n        const dia = new Date(e.target.value).getUTCDay();\r\n\r\n        if ([6, 0].includes(dia)) {\r\n            e.target.value = '';\r\n            mostrarAlerta('Fines de semana no permitidos', 'error', '.formulario');\r\n        } else {\r\n            cita.fecha = e.target.value;\r\n        }\r\n    });\r\n}\r\n\r\nfunction seleccionarHora() {\r\n    const inputFecha = document.querySelector('#hora');\r\n    inputFecha.addEventListener('input', function (e) {\r\n        const horaCita = e.target.value;\r\n        // const hora = horaCita.split(':')\r\n\r\n        /* console.log(hora);\r\n        2) ['17', '56']\r\n        0: \"17\"\r\n        1: \"56\"length: 2\r\n        [[Prototype]]: Array(0) */\r\n\r\n        const hora = horaCita.split(':')[0];\r\n        if (hora < 10 || hora >= 18) {\r\n            e.target.value = '';\r\n            mostrarAlerta('Hora No Válida', 'error', '.formulario');\r\n        } else {\r\n            /** hora válida */\r\n            cita.hora = e.target.value;\r\n        }\r\n    });\r\n}\r\n\r\nfunction mostrarResumen() {\r\n    const resumen = document.querySelector('.contenido-resumen');\r\n\r\n    /** Limpiar el contenido de Resumen */\r\n    while (resumen.firstChild) {\r\n        resumen.removeChild(resumen.firstChild);\r\n    }\r\n\r\n    /*\r\n    console.log(Object.values(cita));\r\n    (4) [' Kevin Acuña', '', '', Array(0)]\r\n    0: \" Kevin Acuña\"\r\n    1: \"\"\r\n    2: \"\"\r\n    3: []\r\n    length: 4\r\n    [[Prototype]]: Array(0)\r\n    */\r\n\r\n    if (Object.values(cita).includes('') || cita.servicios.length === 0) {\r\n        mostrarAlerta('Faltan Datos de Servicios, Fecha u Hora', 'error', '.contenido-resumen', false);\r\n\r\n        return;\r\n    }\r\n\r\n    /** Formatear Div de resumen \r\n     * lo primero que voy a hacer aquí es de aplicar destructuring al Objeto de cita, a estas alturas ya tenemos todos los datos, ya pase la validación, se que todo va a tener información. */\r\n    const { nombre, fecha, hora, servicios } = cita;\r\n\r\n    /** Heading para servicios en Resumen */\r\n    const headingServicios = document.createElement('H3');\r\n    headingServicios.textContent = 'Resumen de Servicios';\r\n    resumen.appendChild(headingServicios);\r\n\r\n    /** Iterando y mostrando los servicios */\r\n    servicios.forEach(servicio => {\r\n        const { id, nombre, precio } = servicio;\r\n        const contenedorServicio = document.createElement('DIV');\r\n        contenedorServicio.classList.add('contenedor-servicio');\r\n\r\n        const textoServicio = document.createElement('P');\r\n        textoServicio.textContent = nombre;\r\n\r\n        const precioServicio = document.createElement('P');\r\n        precioServicio.innerHTML = `<span>Precio</span> $${precio}`;\r\n\r\n        contenedorServicio.appendChild(textoServicio);\r\n        contenedorServicio.appendChild(precioServicio);\r\n\r\n        resumen.appendChild(contenedorServicio);\r\n    });\r\n\r\n    /** Heading para Cita en Resumen */\r\n    const headingCita = document.createElement('H3');\r\n    headingCita.textContent = 'Resumen de Cita';\r\n    resumen.appendChild(headingCita);\r\n\r\n    const nombreCliente = document.createElement('P');\r\n    nombreCliente.innerHTML = `<span>Nombre:</span> ${nombre}`;\r\n\r\n    const fechaCita = document.createElement('P');\r\n    fechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`;\r\n\r\n    const horaCita = document.createElement('P');\r\n    horaCita.innerHTML = `<span>Hora:</span> ${hora} Horas`;\r\n\r\n    resumen.appendChild(nombreCliente);\r\n    resumen.appendChild(fechaCita);\r\n    resumen.appendChild(horaCita);\r\n\r\n    console.log(resumen);\r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo, elemento, desaparece = true) {\r\n    /** Previenen que se genere más de una alerta  */\r\n    const alertaPrevia = document.querySelector('.alerta');\r\n    if (alertaPrevia) {\r\n        alertaPrevia.remove();\r\n    }\r\n\r\n    /** Scripting para crear la alerta */\r\n    const alerta = document.createElement('DIV');\r\n    alerta.textContent = mensaje;\r\n    alerta.classList.add('alerta');\r\n    alerta.classList.add(tipo);\r\n\r\n    const referencia = document.querySelector(elemento);\r\n    referencia.appendChild(alerta);\r\n\r\n    if (desaparece) {\r\n        /** Eliminar la alerta */\r\n        setTimeout(() => {\r\n            alerta.remove();\r\n        }, 3000);\r\n    }\r\n}\r\n\r\nfunction mostrarSpinner() {\r\n    const spinner = document.createElement('div');\r\n    spinner.classList.add('sk-chase');\r\n\r\n    spinner.innerHTML = `\r\n        <div class=\"sk-chase-dot\"></div>\r\n        <div class=\"sk-chase-dot\"></div>\r\n        <div class=\"sk-chase-dot\"></div>\r\n        <div class=\"sk-chase-dot\"></div>\r\n        <div class=\"sk-chase-dot\"></div>\r\n        <div class=\"sk-chase-dot\"></div>\r\n    `;\r\n\r\n    resultado.appendChild(spinner);\r\n}"]}